# API_Docs

# Spot
## REST maket、Trading API<br>
 [Spot interface illustration](https://documenter.getpostman.com/view/4559526/S17uv7xX)

## WebSocket market, Trading API<br>
|**Interface Type**|   **Data Type**   |**Request method** |**Type**   |**Description**                     |**verification **        |                                                                                                                                            
|----------- |------------------ |------------------------------------------------------------------------------------------------------------------------------------------------------------------- |---------- |---------------------------- |--------------|
|Websocket   |Market interface|market.$symbol.kline.$period|sub|Subscribe the data of candle stick              |No|
|Websocket   |Market interface|market.$symbol.kline.$period|req|Request the data of candle stick              |No|
|Websocket   |Market interface|market.$symbol.depth.$type | sub|Subscribe the data of Market Depth       |No|
|Websocket   |Market interface|market.$symbol.depth.$type | req|Request the data of Market Depth       |No|
|Websocket   |Market interface|market.$symbol.detail|       sub|Subscribe the data of Market detail      |No|
|Websocket   |Market interface|market.$symbol.detail|       sub|Request the data of Market detail      |No|
|Websocket   |Market interface|market.$symbol.trade.detail| req|Request the data of Trade detail      |No|
|Websocket   |Market interface|market.$symbol.trade.detail| sub|Subscribe the data of Trade Detail       |No|



## Subscribe the data of candle stick market. $symbol. kline. $period

After building the connection with WebSocket API successfully, please send the data with a certain format (as followed) to Server to subscribe ：
```
{
  "sub": "market.$symbol.kline.$period",
  "id": "id generate by client"
}
```

| Parameter         | Mandatory   | Type     | Description                | default   | Interval                                     |
| ------------ | ----- | ------ | ----------------- | ----- | ---------------------------------------- |
| symbol       | true  | string | Paris                |       | ETH/USDT, LTC/USDT, ETC/BTC, BCH/BTC... |
| period       | true  | string | Time period of the candle stick          |       | 1min, 5min, 15min, 30min, 60min,day |

**Example: subscribe in a right method**

Successful subscription
```
{
  "sub": "market.BTC/USDT.kline.1min",
  "id": "id1"
}
```

Example: return to data after subscription succeeded
```
{
  "id": "id1",
  "status": "ok",
  "subbed": "market.BTC/USDT.kline.1min",
  "ts": 1489474081631
}
```

Example: Client will receive data when candle stick has update information. 
```json
{
  "ch": "market.BTC/USDT.kline.1min",
  "ts": 1489474082831,
  "tick": {
    "id": 1489464480,
    "amount": 0.0,
    "count": 0,
    "open": 7962.62,
    "close": 7962.62,
    "low": 7962.62,
    "high": 7962.62,
    "vol": 0.0
  }
}
```

tick description
```
   "tick": {
     "id": ID of Candle Stick,
     "amount": Volume,
     "count": Filled Number,
     "open": Open Price,
     "close": Closed Price, the last price is the last bar in candle stick
     "low": The Lowest Price,
     "high": The Highest Price,
     "vol": total volume, which is sum (filled price * volume)
   }
```

**Example: wrong subscription**

Subscription error (symbol error)
```
{
  "sub": "market.invalidsymbol.kline.1min",
  "id": "id2"
}
```

Example: return to data after fail to subscribe 
```json
{
  "id": "id2",
  "status": "error",
  "err-code": "bad-request",
  "err-msg": "invalid topic market.invalidsymbol.kline.1min",
  "ts": 1494301904959
}
```

Subscription error (topic error)
```
{
  "sub": "market.BTC/USDT.kline.3min",
  "id": "id3"
}
```

Example: return to data after fail to subscribe  
```json
{
  "id": "id3",
  "status": "error",
  "err-code": "bad-request",
  "err-msg": "invalid topic market.BTC/USDT.kline.3min",
  "ts": 1494310283622
}
```

## Request the data of candle stick market.$symbol. kline. $period  

```
{
  "req": "market.$symbol.kline.$period",
  "id": "id generated by client",
  "from": 1533536947, //optional, type: long, the time between 2017-07-28T00:00:00+08:00 and 2050-01-01T00:00:00+08:00, unit: second
  "to": 1533536947 //optional, type: long, the time between 2017-07-28T00:00:00+08:00 and 2050-01-01T00:00:00+08:00 unit: second, it must lager than “from”.
}
```

| Parameter         | Mandatory   | Type     | Description                | default   | Interval                                     |
| ------------ | ----- | ------ | ----------------- | ----- | ---------------------------------------- |
| symbol       | true  | string | Paris                |       | ETH/USDT, LTC/USDT, ETC/BTC, BCH/BTC...|
| period       | true  | string | Time period of the candle stick          |       | 1min, 5min, 15min, 30min, 60min,day  |


* Responding result

`[t1, t5]`
assuming the candle stick has t1 ~ t5.

* from: t1, to: t5, return [t1, t5].
* from: t5, to: t1, which t5 > t1, return [].
* from: t5, return [t5].
* from: t3, return [t3, t5].
* to: t5, return [t1, t5].
* from: t which t3 < t <t4, return [t4, t5].
* to: t which t3 < t <t4, return [t1, t3].
* from: t1 and to: t2, should satisfy 1501171200 < t1 < t2 < 2524579200.

```
maximum item: 300 in one time
```

#### Example: Request the data of candle stick

```
{
  "req": "market.BTC/USDT.kline.1min",
  "id": "id10"
}
```

Example: return to data 
```
{
  "rep": "market.BTC/USDT.kline.1min",
  "status": "ok",
  "id": "id10",
  "tick": [
    {
      "amount": 17.4805,
      "count":  27,
      "id":     1494478080,
      "open":   10050.00,
      "close":  10058.00,
      "low":    10050.00,
      "high":   10058.00,
      "vol":    175798.757708
    },
    {
      "amount": 15.7389,
      "count":  28,
      "id":     1494478140,
      "open":   10058.00,
      "close":  10060.00,
      "low":    10056.00,
      "high":   10065.00,
      "vol":    158331.348600
    },
    // more KLine data here
  ]
}
```

## Subscribe the data of Market Depth market.$symbol.depth.$type

After building the connection with WebSocket API successfully, please send the data with a certain format (as followed) to Server to subscribe: 
```
{
  "sub": "market.$symbol.depth.$type",
  "id": "id generated by client"
}
```

| Parameter         | Mandatory   | Type     | Description                | default   | Interval                                     |
| ------------ | ----- | ------ | ----------------- | ----- | ---------------------------------------- |
| symbol       | true  | string | Pairs                 |       | BTC/USDT, ETH/USDT, LTC/USDT, ETC/BTC... |
| type         | true  | string | Depth type          |       | step1, step2, step3, step4, step5|


Example: subscribe in a right method
```
{
  "sub": "market.BTC/USDT.depth.step2",
  "id": "id1"
}
```

Example: return to data after subscribe succeeded 
```
{
  "id": "id1",
  "status": "ok",
  "subbed": "market.BTC/USDT.depth.step2",
  "ts": 1489474081631
}
```

Example: Client will receive data when depth has update information. 
```
{
  "ch": "market.BTC/USDT.depth.step2",
  "ts": 1489474082831,
  "tick": {
    "bids": [
    [9999.3900,0.0098], // [price, amount]
    [9992.5947,0.0560],
    // more Market Depth data here
    ]
    "asks": [
    [10010.9800,0.0099]
    [10011.3900,2.0000]
    //more data here
    ]
  }
}
```

tick description
```
  "tick": {
    "bids": [
    [bid 1 price, bid 2 volume]
    [bid 2 price, bid 2 volume]
    //more data here
    ]
    "asks": [
    [ask 1 price, ask 1 volume]
    [ask 2 price, ask 2 volume]
    //more data here
    ]
  }
```

## Request the data of Market Depthmarket.$symbol.depth.$type

```
{
  "req": "market.$symbol.depth.$type",
  "id": "id generated by client"
}
```

#### Example：Request the data of Market Depth
```
{
  "req": "market.BTC/USDT.depth.step2",
  "id": "id10"
}
```

Example: return to data：
```
{
  "rep": "market.BTC/USDT.depth.step2",
  "status": "ok",
  "id": "id10",
  "tick": {
    "bids": [
    [9999.3900,0.0098], // [price, amount]
    [9992.5947,0.0560],
    // more Market Depth data here
    ]
    "asks": [
    [10010.9800,0.0099]
    [10011.3900,2.0000]
    //more data here
    ]
  }
}
```

## Request data of Trade Detail market.$symbol.trade.detail

```
{
  "sub": "market.$symbol.trade.detail",
  "id": "id generated by client"
}
```

| Parameter         | Mandatory   | Type     | Description                | default   | Interval                                     |
| ------------ | ----- | ------ | ----------------- | ----- | ---------------------------------------- |
| symbol       | true  | string | Pair                |       | ETH/USDT, LTC/USDT, ETC/BTC, BCH/BTC... |

Example: subscribe in a right method：

```
{
  "sub": "market.BTC/USDT.trade.detail",
  "id": "id1"
}
```

Example: return to data after subscribe succeeded ：
```
{
  "id": "id1",
  "status": "ok",
  "subbed": "market.BTC/USDT.trade.detail",
  "ts": 1489474081631
}
```

Example: Client will receive data when Trade Detail has update information. 

```
{
  "ch": "market.BTC/USDT.trade.detail",
  "ts": 1489474082831,
  "tick": {
        "id": 14650745135,
        "ts": 1533265950234,
        "data": [
            {
                "amount": 0.0099,
                "ts": 1533265950234,
                "id": 146507451359183894799,
                "price": 401.74,
                "direction": "buy"
            },
            // more Trade Detail data here
        ]
    }

  ]
  }
}
```

data description：
```
  "data": [
    {
      "id":        Message ID,
      "price":     Filled Price,
      "time":      Filled Time,
      "amount":    Volume,
      "direction": Filled Type,
      "tradeId":   Filled ID,
      "ts":        Timestamp
    }
  ]
```

## Request data of Trade detail market.$symbol.trade.detail

```
{
  "req": "market.$symbol.trade.detail",
  "id": "id generated by client"
}
```

*	Maximum number: 300 Trade Detail

#### Example: request the data of Trade detail
```
{
  "req": "market.BTC/USDT.trade.detail",
  "id": "id11"
}
```

Example: return to data:
```
{
  "rep": "market.BTC/USDT.trade.detail",
  "status": "ok",
  "id": "id11",
  "data": [
    {
      "id":        601595424,
      "price":     10195.64,
      "time":      1494495766,
      "amount":    0.2943,
      "direction": "buy",
      "tradeId":   601595424,
      "ts":        1494495766000
    },
    {
      "id":        601595423,
      "price":     10195.64,
      "time":      1494495711,
      "amount":    0.2430,
      "direction": "buy",
      "tradeId":   601595423,
      "ts":        1494495711000
    },
    // more Trade Detail data here
  ]
}
```
## Subscribe data of Market detail market.$symbol.detail
```
{
  "req": "market.$symbol.detail",
  "id": "id generated by client"
}
```

*	Only return to current Market Detail

#### Example: Subscribe data of Market detail

```
{
  "sub": "market.BTC/USDT.detail",
  "id": "id12"
}
```

Example: return to data:
```json
{
  "ch": "market.BTC/USDT.detail",
  "status": "ok",
  "id": "id12",
  "tick": {
    "amount": 12224.2922,
    "open":   9790.52,
    "close":  10195.00,
    "high":   10300.00,
    "ts":     1494496390000,
    "id":     1494496390,
    "count":  15195,
    "low":    9657.00,
    "vol":    121906001.754751
  }
}
```
## Request the data of Market Depth market.$symbol.detail
```
{
  "req": "market.$symbol.detail",
  "id": "id generated by client"
}
```

* Only return to current Market Detail

#### Example: Request data of Market Depth

```
{
  "req": "market.BTC/USDT.detail",
  "id": "id12"
}
```

Example: return to data:
```json
{
  "rep": "market.BTC/USDT.detail",
  "status": "ok",
  "id": "id12",
  "tick": {
    "amount": 12224.2922,
    "open":   9790.52,
    "close":  10195.00,
    "high":   10300.00,
    "ts":     1494496390000,
    "id":     1494496390,
    "count":  15195,
    "low":    9657.00,
    "vol":    121906001.754751
  }
}
```


# Contract 
## REST Market, Trading API<br>
[Example: Contract API](https://documenter.getpostman.com/view/4559526/S17xq5Lg)
## WebSocket Market, Trading API<br>
|**Interface Type**|   **Data Type**   |**Request method** |**Type**   |**Description**                     |**verification**        |                                                                                                                                            
  |----------- |------------------ |------------------------------------------------------------------------------------------------------------------------------------------------------------------- |---------- |---------------------------- |--------------|
  |Websocket   |Market interface |         market.$symbol.kline.$period|                                                                                                            sub        |Subscribe the data of candle stick              |No|
  |Websocket   |Market interface|           market.$symbol.kline.$period|                                                                                                                    req        |Request the data of candle stick              |No|
  |Websocket   |Market interface           |market.$symbol.depth.$type |                                                                                                                     sub        |Subscribe the data of Market Depth       |No|
  |Websocket   |Market interface           |market.$symbol.depth.$type |                                                                                                                     req        |Request the data of Market Depth       |No|
 |Websocket   |Market interface           |market.$symbol.detail|                                                                                                                     sub        |Subscribe the data of Market detail      |No|
 |Websocket   |Market interface           |market.$symbol.detail|                                                                                                                     req        |Request the data of Market detail      |No|
  |Websocket   |Market interface           |market.$symbol.trade.detail |                                                                                                                     req        |Request the data of Trade detail       |No|
  |Websocket   |Market interface           |market.$symbol.trade.detail|        sub |Subscribe the data of Trade Detail  | No  |

#### Subscribe the data of candle stick

After building the connection with WebSocket API successfully, please send the data with a certain format (as followed) to Server to request data:

    {
    "sub": "market.$symbol.kline.$period",
    "id": "id generate by client"
    }

  |**Parameter**|   **Mandatory**  | **Type**  | **Description** |  **default**  | **Interval**
  |--------------| -----------------| ---------- |----------| ------------| --------------------------------------------------------------------------------|
  |symbol  |       true         |  string  |   pairs    |               |such as, "BTC_CW" means BTC contract in current contract，"BTC_NW" means BTC contact for next week，"BTC_CQ" means BTC contract for quarterly |
  |period    |     true          | string   |  Time period of the candle stick      |            |1min, 5min, 15min, 30min, 1hour,4hour,1day, 1mon|

Example: subscribe the Request Parameter in a right method：

    {
    "sub": "market.BTC_CQ.kline.1min",
    "id": "id1"
    }

Example: return to data after subscription succeeded:

    {
    "id": "id1",
    "status": "ok",
    "subbed": "market.BTC_CQ.kline.1min",
    "ts": 1489474081631
    }

Example: Client will receive data when candle stick has update information. 

    {
     "ch": "market.BTC_CQ.kline.1min",
     "ts": 1489474082831,
     "tick":
        {
         "id": 1489464480,
         "mrid": 268168237,
         "vol": 100,
         "count": 0,
         "open": 7962.62,
         "close": 7962.62,
         "low": 7962.62,
         "high": 7962.62,
         "amount": 0.3 //unit：BTC, the number of the token
        }
    }

    tick description

    "tick":
       {
         "id": ID of Candle Stick,
         "mrid": 268168237,
         "vol": Volume, Cont
         "count": Filled Number,
         "open": Open Price,,
         "close": Closed Price, the last price is the last bar in candle stick
         "low": The Lowest Price,
         "high": The Highest Price,
         "amount": BTC, that is sum(each order, the value of the contract* order Volume/Filled Price)
      }

**Example: wrong subscription**

subscription error (symbol error)

    {
     "sub": "market.invalidsymbol.kline.1min",
     "id": "id2"
    }

Example: return to data after fail to subscription

    {
     "id": "id2",
     "status": "error",
     "err-code": "bad-request",
     "err-msg": "invalid topic market.invalidsymbol.kline.1min",
     "ts": 1494301904959
    }

subscription error (topic error)

    {
     "sub": "market.BTC_CQ.kline.3min",
     "id": "id3"
    }

Example: return to data after fail to subscription

    {
     "id": "id3",
     "status": "error",
     "err-code": "bad-request",
     "err-msg": "invalid topic market.BTC_CQ.kline.3min",
     "ts": 1494310283622
    }

#### Request the data of candle stick </a>

After building the connection with WebSocket API successfully, please send the data with a certain format (as followed) to Server to request data:

    {
     "req": "market.$symbol.kline.$period",
     "id": "id generated by client",
     "from": "optional, type: long, Time between 2017-07-28T00:00:00+08:00 and 2050-01-01T00:00:00+08:00 ， unit: sec",
      "to": "optional, type: long, Time between 2017-07-28T00:00:00+08:00 and 2050-01-01T00:00:00+08:00 ，unit: sec，must larger than from"}

| **Parameter** | **Mandatory** | **Type** | **Description** | **default** |**Interval** |
| -------- | -------- | ------ | ------ | ------- |---------------------------------------- |
| symbol | true | string |pairs  | |such as, "BTC_CW" means BTC contract in current contract，"BTC_NW" means BTC contact for next week，"BTC_CQ" means BTC contract for quarterly |
 | period | true | string | Time period of the candle stick  | | 1min, 5min, 15min, 30min, 1hour,4hour,1day, 1mon|

    [t1, t5] assume the candle stick is from t1 to t5：

    from: t1, to: t5, return [t1, t5].
    from: t5, to: t1, which t5  > t1, return [].
    from: t5, return [t5].
    from: t3, return [t3, t5].
    to: t5, return [t1, t5].
    from: t which t3  < t  <t4, return [t4, t5].
    to: t which t3  < t  <t4, return [t1, t3].
    from: t1 and to: t2, should satisfy 1325347200  < t1  < t2  < 2524579200.

**Note**：300 is the maximum number

Example: request the data of candle stick：

    {
    "req": "market.BTC_CQ.kline.1min",
    "id": "id4"
    }

Example: return to data after request succeeded：

    {
     "rep": "market.BTC_CQ.kline.1min",
     "status": "ok",
     "id": "id4",
     "tick": [
       {
        "vol": 100,
        "count": 27,
        "id": 1494478080,
        "open": 10050.00,
        "close": 10058.00,
        "low": 10050.00,
        "high": 10058.00,
        "amount": 175798.757708
       },
       {
        "vol": 300,
        "count": 28,
        "id": 1494478140,
        "open": 10058.00,
        "close": 10060.00,
        "low": 10056.00,
        "high": 10065.00,
        "amount": 158331.348600
       }
     ]
    }

#### Subscribe the data of Market Depth </a>

After building the connection with WebSocket API successfully, please send the data with a certain format (as followed) to Server to subscribe:

    {
    "sub": "market.$symbol.depth.$type",
    "id": "id generated by client"
    }

  |**Parameter**   |**Mandatory**   |**Type**   |**Description**     |**default**   |**Interval**|
  |-------------- |-------------- |---------- |------------ |------------ |---------------------------------------------------------------------------------|
  |symbol         |true           |string     |pairs             |        |such as, "BTC_CW" means BTC contract in current contract，"BTC_NW" means BTC contact for next week，"BTC_CQ" means BTC contract for quarterly |
  |type           |true           |string     |Depth type        |        |(150 data level) step0, step1, step2, step3, step4, step5 (Merge depth1-5). No merge in step0; (20data level) step6, step7, step8, step9, step10, step11(merger depth7-11)；no merge in step6.|

**Notes**：When user choose “merge depth”, a certain number of market order within the bid price will be merged. Merge depth change the viewing method, the filled price would not be change.

Example: subscribe the Request Parameter in a right method：

    {
    "sub": "market.BTC_CQ.depth.step0",
    "id": "id5"
    }

Example: return to data after subscription succeeded：

    {
      "id": "id5",
      "status": "ok",
      "subbed": "market.BTC_CQ.depth.step0",
      "ts": 1489474081631
    }

Example: Client will receive data when Depth has update information：

    {
     "ch": "market.BTC_CQ.depth.step0",
     "ts": 1489474082831,
     "tick":
       {
        "mrid": 269073229,
         "id": 1539843937,
            "bids": [
             [9999.9101,1],
             [9992.3089,2]
                    ],
             "asks": [
              [10010.9800,10],
              [10011.3900,15]
                     ],
	      "ts": 1539843937417,
	       "version": 1539843937,
	       "ch": "market.BTC_CQ.depth.step0"
        }
    }

    tick description：
    "tick": {
      "bids": [
        [bid 1 price, bid one volume]
        [bid 2 price, bid 2 volume]
         //more data here
       ],
       "asks": [
        [ask 1 price, ask 1 volume]
        [ask 2 price, ask 2 volume]
        //more data here
       ]
    }

#### Subscribe data of Market detail</a>

After building the connection with WebSocket API successfully, please send the data with a certain format (as followed) to Server to request data: 

    {
     "sub": "market.$symbol.detail",
     "id": "id generated by client"
    }

  |**Parameter**   |**Mandatory**   |**Type**   |**Description**     |**default**   |**Interval**|
  |-------------- |-------------- |---------- |------------ |------------ |--------------------------------------------------------------------------------|
  |symbol         |true           |string     |Pairs      |              |such as, "BTC_CW" means BTC contract in current contract，"BTC_NW" means BTC contact for next week，"BTC_CQ" means BTC contract for quarterly|

Example: subscribe the Request Parameter of subscribe Market Detail：

    {
     "sub": "market.BTC_CQ.detail",
     "id": "id6"
    }

Example: return to data after request succeeded：

    {
	"ch": "market.BTC_CW.detail",
	"ts": 1539842340724,
	"tick": {
		"id": 1539842340,
		"mrid": 268041138,
		"open": 6740.47,
		"close": 7800,
		"high": 7800,
		"low": 6726.13,
		"amount": 477.1200312075244664773339914558562673572,
		"vol": 32414,
		"count": 1716
	        }
       }

Tick data description：

 "tick":
      {
        "id": id,
        "mrid": 1494496390000,
        "vol": Volume(张),
        "count": Filled Number,
        "open": Open Price,,
        "close": Closed Price, the last price is the last bar in candle stick
        "low": The Lowest Price,
        "high": The Highest Price,
        "amount": Volume(token), which is sum(each order Volume(Cont)*contract Value/Order Filled Price)
      }


#### Request data of Trade Detail

After building the connection with WebSocket API successfully, please send the data with a certain format (as followed) to Server to request data:

    {
     "req": "market.$symbol.trade.detail",
     "id": "id generated by client"
    }

Only return to current Trade Detail

Example: request data Request Parameter of Market Detail：

    {
     "req": "market.BTC_CQ.trade.detail",
     "id": "id8"
    }

Example: return to data after request succeeded：

    {
     "ch": "market.BTC_CQ.trade.detail",
     "ts": 1489474082831,
     "data": [
              {
               "id":601595424,
               "price":10195.64,
               "amount":100,
               "direction":"buy",
               "ts":1494495766000
               },
              {
              "id":601595423,
              "price":10195.64,
              "amount":200,
              "direction":"buy",
              "ts":1494495711000
              }
            ]
     }

Tick data description：

    "data": [
      {
       "id": Message ID,
       "price": Filled Price,
       "amount": Volume (Cont),
       "direction": Filled Type,
       "ts": Timestamp
      }
     ]

#### Subscribe the data of Trade Detail</a>

After building the connection with WebSocket API successfully, please send the data with a certain format (as followed) to Server to subscribe:：

    {
    "sub": "market.$symbol.trade.detail",
    "id": "id generated by client"
    }

**Notes**：Data maximum number: last 300 Trade Detail

  |**Parameter**   |**Mandatory**   |**Type**   |**Description**   |**default**   |**Interval**|
  |-------------- |-------------- |---------- |---------- |------------ |--------------------------------------------------------------------------------|
  |symbol         |true           |string     |Contact name    |            |such as, "BTC_CW" means BTC contract in current contract，"BTC_NW" means BTC contact for next week，"BTC_CQ" means BTC contract for quarterly|

Example: subscribe the Request Parameter in a right method：

    {
     "sub": "market.BTC_CQ.trade.detail",
     "id": "id7"
    }

Example: return to data after subscription succeeded：

    {
     "id": "id7",
     "status": "ok",
     "subbed": "market.BTC_CQ.trade.detail",
     "ts": 1489474081631
    }

Example: Client will receive data when Trade Detail has update information. 

    {
	"ch": "market.BTC_NW.trade.detail",
	"ts": 1539831709042,
	"tick": {
		"id": 265842227,
		"ts": 1539831709001,
		"data": [{
			"amount": 20,
			"ts": 1539831709001,
			"id": 265842227259096443,
			"price": 6742.25,
			"direction": "buy"
		        }]
	          }
     }

data description：：

    "data": [
      {
       "id": Message ID,
       "price": Filled Price,
       "amount": Volume (Cont),
       "direction": Filled Type,
       "ts": Timestamp
      }
     ]

# WebSocket request and subscription description<br>

### 1. Data compression
All the return data of WebSocket API will be compressed as GZIP format. Client need apply decompression after receiving data. We recommend “pako”. （[【pako】](https://github.com/nodeca/pako) ）

### 2. WebSocket library
[【ws】](https://github.com/websockets/ws) is the WebSocket library which included inNode.js.

### 3. heartbeat
WebSocket API supports bilateral heartbeat, whatever Server or Client, they both can implement “ping message”, and another side return “pong message”

WebSocket Server send heartbeat: 
```
{"ping": 18212558000}
```
WebSocket Client should return: 
```
 {"pong": 18212558000}
```
Notes: the value of “pong” in the return data is the value of “ping” in receive data. 
Notes: after the connection between WebSocket Client and WebSocket Server has built, WebSocket Server will send a heartbeat to WebSocket Client every 5s (it could be change). WebSocket Server will disconnect actively if WebSocket Client miss 2 times heartbeat. WebSocket Client send the last 2-heartbeat message with a value of “ping”, WebSocket Server will keep the connecting status.

```
┌────────┐                         ┌────────┐
│ Client │                         │ Server │
└───┬────┘                         └───┬────┘
    │         {"ping": 18212558000}  │
    │<─────────────────────────────────┤
    │                                  │ wait 5s
    │                                  ├───┐
    │                                  │<──┘
    │         {"ping": 18212558000}  │
    │<─────────────────────────────────┤
    │                                  │
    │ {"pong": 18212558000}          │
    ├┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄>│
    │                                  │
```
Notes: WebSocket Client send the last 2-heartbeat message with a value of “ping”, WebSocket Server will keep the connecting status.
```
┌────────┐                         ┌────────┐
│ Client │                         │ Server │
└───┬────┘                         └───┬────┘
    │         {"ping": 1523778470416}  │
    │<─────────────────────────────────┤
    │                                  │ wait 5s
    │                                  ├───┐
    │                                  │<──┘
    │         {"ping": 1523778475416}  │
    │<─────────────────────────────────┤
    │                                  │ wait 5s
    │                                  ├───┐
    │                                  │<──┘
    │                                  │
    │                                  │ close WebSocket connection
    │                                  ├───┐
    │                                  │<──┘
    │                                  │

```
